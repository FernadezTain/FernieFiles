<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>FernieX - Files</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<h1>FernieX - Files</h1>

<div class="container">
    <div class="products" id="products"></div>
</div>

<script src="animation.js"></script>
<script>
const list = document.getElementById('products');

fetch('data.json')
.then(r => r.json())
.then(data => {
    data.products.forEach(p => {
        const viewed = localStorage.getItem('viewed_' + p.id);
        const label = viewed ? 'ðŸ‘ viewed' : 'new';
        `;
    });

    // Ð”ÐµÐ»ÐµÐ³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ÐºÐ»Ð¸ÐºÐ° Ð½Ð° ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€
    list.addEventListener('click', e => {
        const card = e.target.closest('.product');
        if (!card) return;

        // Ð˜Ð³Ð½Ð¾Ñ€Ð¸Ñ€ÑƒÐµÐ¼ ÐºÐ»Ð¸Ðº Ð¿Ð¾ ÐºÐ½Ð¾Ð¿ÐºÐµ
        if (e.target.classList.contains('btn-more')) return;

        e.preventDefault();

        // Ð—Ð°ÐºÑ€Ñ‹Ð²Ð°ÐµÐ¼ Ð´Ñ€ÑƒÐ³Ð¸Ðµ ÐºÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ¸
        document.querySelectorAll('.product.active').forEach(activeCard => {
            if (activeCard !== card) activeCard.classList.remove('active');
        });

        // ÐŸÐµÑ€ÐµÐºÐ»ÑŽÑ‡Ð°ÐµÐ¼ Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚ÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ¹
        card.classList.toggle('active');
    });

    // ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° ÐºÐ½Ð¾Ð¿Ð¾Ðº Ð¿Ð¾Ð´Ñ€Ð¾Ð±Ð½ÐµÐµ
    document.querySelectorAll('.btn-more').forEach(btn => {
        btn.addEventListener('click', e => {
            const card = e.target.closest('.product');
            const id = data.products.find(p => p.name === card.querySelector('h3').textContent).id;
            window.location.href = `product.html?id=${id}`;
        });
    });
});
</script>
</body>
</html>
